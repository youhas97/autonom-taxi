\documentclass[designspec/spec.tex]{subfiles}

\begin{document}

\section{Sensormodul}
Sensormodulen ska agera som taxins känselspröt. Den kommer att mäta av olika
värden från de olika sensorerna som finns för att sedan skicka mätdata till
kommunikationsmodulen.

\subsection{Funktion}
Sensormodulen ska hämta eventuellt filtrerade värden från sensorerna, omvandla
till linjära enheter och skicka vidare de till kommunikationsmodulen.

\paragraph{Sensorer}
Taxin kommer att ha en optisk avståndsmätare som pekar rakt fram för att
upptäcka hinder framför bilen samt en optisk avståndsmätare på sidan för att
detektera hinder höger om bilen vid omkörning.

\paragraph{Filtrering}
Eftersom sensorerna kan bli påverkade av eventuella störningar kommer det
eventuellt att finnas brusfilter som filtrerar bort dessa störningar för att
skapa så noggranna sensorvärden som möjligt.

\subsection{Hårdvaruimplementation} 
Sensormodulen består av en ATMega1284 mikrokontroller och fyra sensorer; en
avståndsmätare på framsidan, en avståndsmätare på höger sida samt två
halleffektsensorer placerade på två av hjulen. Kontrollern är även kopplad till
en LCD-display för att kunna visa värden för felsökning.

\subsubsection{Budget}
Nedan är produkter som ej medföljer baschassit och behöver beställas.
\begin{itemize}
	\item \textbf{ATMega1284} Modulens microprocessor. 
    \item \textbf{GP2D120} Avståndsmätare för hinder framför bilen.
    \item \textbf{GP2Y0A02YK} Avståndsmätare för hinder höger om bilen.
    \item \textbf{LCD JM162A} LCD-display för att visa parametrar under körning
    i felsökningssyfte.
\end{itemize}

\subsubsection{Kontroll och bedömning}
% TODO gör kontroll av pins

Mikrokontrollen behöver endast kommunicera med kommunikationsmodulen via SPI
samt ta emot värden från sensorerna och göra enkla beräkningar vid omvandling.
Mikrokontrollen bör inte ha något problem att utföra dessa uppgifter.

\subsection{Mjukvaruimplementation} 
Sensormodulen ska bestå av en tom while loop och ett avbrott som aktiveras när
kommunikationsmodulen efterfrågar värden. Sensormodulen skickar då de senaste
sensorvärdena och samplar därefter nästa grupp av värden.

\end{document}
